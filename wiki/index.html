<!DOCTYPE html>
<html>
<!--
   This is MDwiki v0.6.2
   (C) 2013 by Timo Dörr and contributors. This software is licensed
   under the terms of the GNU GPLv3 with additional terms applied.
   See https://github.com/Dynalon/mdwiki/blob/master/LICENSE.txt for more detail.
   See http://github.com/Dynalon/mdwiki for a copy of the source code.
-->
<head>
    <title>wiki</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="fragment" content="!">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.png" />
    <meta charset="UTF-8">
    <style type="text/css">
    html,body{
        height: 100%;
    }
    .header .site-map .list-3{
        border-bottom: 2px solid gray;
    }

    .wiki-container{
        min-height: 100%;
        margin-top: 90px;
    }
    .menu{
        position: fixed;
        height: 100%;
    }
    .sidebar {
        height: 100%;
        margin: 10px 20px;
    }

    .sidebar p {
        font-size: 16px;
    }

    .sidebar a{
        display: block;
    }
    .wiki-container .content{
        width: 80%;
        border: 1px solid;
        border-bottom: none;
        height: 100%;
        margin-left: 20%;
        background:none;
    }
</style>
    <link rel="stylesheet" type="text/css" href="../index/style.css">
</head>
<body>
    <div class="header">
        <div class="site-map">
            <ul class="list">
                <li class="list-4" id="list-4">
                    <a href="/blog/2015/12/09/网址记录/">网址记录</a>
                </li>
                <li class="list-3" id="list-3">
                    <a href="/wiki/">Wiki</a>
                </li>
                <li class="list-2" id="list-2">
                    <a href="/blog/">博客</a>
                </li>
                <li class="list-1 no-border" id="list-1">
                    <a href="/">首页</a>
                </li>
            </ul>
        </div>
        <div class="logo">
            <span>Antin</span>
        </div>
    </div>
    <div class="wiki-container">
        <div class="menu">
            <h2 class="title">目录结构</h2>
            <div class="sidebar" id="sidebar">
            </div>
        </div>

        <div class="content" id="content">
        </div>
    </div>

    <script src="//cdn.bootcss.com/jquery/3.0.0-beta1/jquery.min.js"></script>
    <script type="text/javascript">
        var data = {};
        window.addEventListener("hashchange", function(){
            router();
        });
        function router(){
            var url = window.location.hash.replace(/#\//, '');
            if(url === ''){
                getNav('sidebar.md');
            }else if(url.indexOf('.md') > 0 && url.indexOf('sidebar') < 0){
                //若目录为空, 则重新获取目录
                if($('div#sidebar a').length === 0){
                    var navUrl = url.split('/'), length = navUrl.length;
                    getNav(url.replace(navUrl[length - 1], 'sidebar.md'));
                }
                //获取内容
                getContent(url);
            }else{
                url += '/sidebar.md';
                getNav(url);
            }
        }
        function getNav(fileName){
           $.ajax({
              url: fileName,
              cache: false
            }).done(function( html ) {
                $('#sidebar').empty().append(html);
                $('div#sidebar a').attr('href', function(index, oldVal){
                    var hashUrl = window.location.hash.replace(/#/, '');
                    if(hashUrl.indexOf(oldVal) < 0){
                        var realUrl = window.location.hash.replace(/#/, '') + '/' + oldVal;
                        return '#' + realUrl;
                    }
                    return '#' + hashUrl;
                });
            });
        }

        function getContent(url){
            $.ajax({
                url: url, //data.baseUrl + '/' +
                cache: false
            }).done(function( html ) {
                $("#content").empty().append(html);
            });
        }
        router();
    </script>
</body>
</html>
